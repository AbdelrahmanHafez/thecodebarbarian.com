<html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()
</script><title>Page 1 | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"/><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/><link href="/style/style.css" rel="stylesheet" type="text/css"/><link href="/style/github.css" rel="stylesheet" type="text/css"/><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li></ul></div></div><div id="nav" class="navbar"><div class="container"><div class="navbar-header"><a href="http://thecodebarbarian.com" class="navbar-brand big-brand"><img src="/images/Barbarian_Head.png" class="logo"/><span class="site-name">The Code Barbarian</span></a></div><div id="home-nav-mobile" class="navbar-right collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="http://thecodebarbarian.com/tag/mongodb.html">MongoDB</a></li><li><a href="http://thecodebarbarian.com/tag/angularjs.html">AngularJS</a></li><li><a href="http://thecodebarbarian.com/tag/nodejs.html">NodeJS</a></li><li><a href="http://thecodebarbarian.com/tag/paleo.html">Paleo</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"></div><div id="mobile-sharing-options" class="container-fluid hidden-sm hidden-md hidden-lg"><div class="row"><div class="col-lg-12"></div></div></div><div class="container"><div class="row"><div class="col-lg-9"><div class="container-fluid"><div class="row"><h2><a href="/a-nodejs-perspective-on-mongodb-36-change-streams">A Node.js Perspective on MongoDB 3.6: Change Streams</a></h2><div class="title-byline-container"><div class="credits">February 09, 2018</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/J2NBMg5.jpg" style="width: 100%"/></div><div class="col-lg-9"><em><p>Before MongoDB 3.6, <a href="https://www.mongodb.com/blog/post/tailing-mongodb-oplog-sharded-clusters">tailing the MongoDB oplog</a> was the only way to listen for changes to your MongoDB database. The <a href="https://docs.mongodb.com/manual/core/replica-set-oplog/">oplog</a> is a special collection that logs all inserts and updates that come in to your MongoDB server so other members of the <a href="https://docs.mongodb.com/manual/replication/">replica set</a> can copy them. Tools like <a href="https://themeteorchef.com/tutorials/setting-up-mongodb-oplog-tailing">Meteor</a> and <a href="https://stripe.com/blog/announcing-mosql">MoSQL</a> were built on tailing the oplog. Unfortunately, the oplog was built primarily to support replication internally as opposed to being a user-facing feature. <a href="https://docs.mongodb.com/manual/changeStreams/">Change streams</a> are a usability layer on top of the MongoDB oplog that make change detection in MongoDB much easier than tailing the oplog directly.</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/a-nodejs-perspective-on-mongodb-36-array-filters">A Node.js Perspective on MongoDB 3.6: Array Filters</a></h2><div class="title-byline-container"><div class="credits">February 02, 2018</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/NFzvLez.png" style="width: 100%"/></div><div class="col-lg-9"><em><p><a href="http://tgrall.github.io/blog/2015/04/21/mongodb-playing-with-arrays/">Strong support for arrays</a> has always been one of MongoDB&#39;s killer features. For example, suppose you have a collection of blog posts where each document contains an array of comments as shown below. Before MongoDB 3.6, you could only update at most one element of the <code>comments</code> array at a time because of limitations with the <a href="https://docs.mongodb.com/manual/reference/operator/update/positional/">positional operator <code>$</code></a>. Array filters in MongoDB 3.6 remove that limitation and add several more exciting features, like updating nested arrays.</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/whats-new-in-mongoose-5-improved-connections">What's New in Mongoose 5: Improved Connections</a></h2><div class="title-byline-container"><div class="credits">January 19, 2018</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/hv2oVuz.png" style="width: 100%"/></div><div class="col-lg-9"><em><p>One of the major reasons for the mongoose 5 release was the <a href="https://github.com/mongodb/node-mongodb-native/blob/3.0.0/CHANGES_3.0.0.md#api-changes">MongoDB driver removing support for the <code>authenticate()</code> function</a>. Up until Mongoose 4.11, that function was the only way mongoose supported doing authentication. In Mongoose 4.11.0, we added the <a href="https://github.com/Automattic/mongoose/blob/master/History.md#4110--2017-06-25">annoying but necessary <code>useMongoClient</code> deprecation warning</a>, and in mongoose 5.0.0-rc0 we <a href="https://github.com/Automattic/mongoose/pull/5942/files#diff-259dec4414a400a6e895f16ff1d0ca3b">deleted 686 lines of legacy connection logic</a> that removed the need for the <code>useMongoClient</code> option. In addition, we made a couple related improvements to the connection API that will make mongoose much cleaner to work with: we made <code>mongoose.connect()</code> always return a promise, and we added a global and connection-level <code>bufferCommands</code> option.</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/whats-new-in-mongoose-5-improved-post-hooks">What's New in Mongoose 5: Improved Post Hooks</a></h2><div class="title-byline-container"><div class="credits">January 12, 2018</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/H7gyZfP.png" style="width: 100%"/></div><div class="col-lg-9"><em><p><a href="https://github.com/Automattic/mongoose/blob/master/History.md#500-rc0--2017-12-28">Mongoose 5.0.0-rc0</a> introduced several important changes to the way middleware works. The most pronounced difference is the ability to use <a href="http://thecodebarbarian.com/introducing-mongoose-5.html#promises-and-async-await-with-middleware">promises and async/await with mongoose middleware</a>. In addition, there are a couple more subtle changes that make the middleware API more consistent. In this article, I&#39;ll cover two changes. The first is that post hooks now always get flow control, even synchronous post hooks. The second is that query middleware is applied when the model is compiled for performance reasons.</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/write-your-own-express-from-scratch">Preview: Write Your Own Express.js From Scratch</a></h2><div class="title-byline-container"><div class="credits">January 05, 2018</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/siEy12i.png" style="width: 100%"/></div><div class="col-lg-9"><em><p><em>This is the beginning of my first subscriber-only article on <a href="https://www.patreon.com/codebarbarian">The Code Barbarian&#39;s Patreon</a>. The article goes into much more depth than normal tech articles and has enough content to fill an ebook, so the whole article is only available to Patreon subscribers. If you like this article, please consider <a href="https://www.patreon.com/codebarbarian">subscribing on Patreon</a> to support future in-depth guides. The next article, &quot;Building Distributed Locking with Node.js and MongoDB&quot;, ships on January 15, 2018!</em></p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/introducing-mongoose-5">Introducing Mongoose 5.0.0-rc0</a></h2><div class="title-byline-container"><div class="credits">December 29, 2017</div></div></div><div class="row"><div class="col-lg-3"><img src="/images/mongoose5.png" style="width: 100%"/></div><div class="col-lg-9"><em><p><a href="https://github.com/Automattic/mongoose/blob/master/History.md#500-rc0--2017-12-28">Mongoose 5.0.0-rc0 was released yesterday</a>. This is the first backwards-breaking release for mongoose since <a href="https://github.com/Automattic/mongoose/blob/master/History.md#400--2015-03-25">4.0.0 was released</a> in March 2015. The major forcing functions for this release were that MongoDB 3.6 removed <a href="https://github.com/mongodb/node-mongodb-native/blob/3.0.0/CHANGES_3.0.0.md#api-changes">support for the way mongoose did authentication</a> (which is why mongoose needed the <a href="http://thecodebarbarian.com/mongoose-4.11-use-mongo-client.html"><code>useMongoClient</code> option</a>) and the <a href="https://github.com/mongodb/node-mongodb-native/blob/3.0.0/HISTORY.md#300-2017-12-24">3.0.0 release of the official MongoDB Node.js driver</a>. Another major priority for Mongoose 5 was dropping support for <a href="https://github.com/nodejs/Release">Node.js &lt; 4</a> and <a href="https://www.mongodb.com/support-policy">MongoDB &lt; 3.0.0</a>. Both Node.js 0.12 and MongoDB 2.6 are about a year past their official end-of-life, and removing support for them has enabled us to make our code base much leaner.</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/wrangling-geojson-with-turf">Wrangling GeoJSON with Turf.js</a></h2><div class="title-byline-container"><div class="credits">December 01, 2017</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/6kP4Bcm.jpg" style="width: 100%"/></div><div class="col-lg-9"><em><p><a href="http://turfjs.org/">Turf.js</a> has become an indispensible part of my Node.js</p>
</em></div></div></div><div class="container-fluid"><div class="row"><h2><a href="/managing-embedded-documents-with-monogram">Managing Embedded Documents with Monogram</a></h2><div class="title-byline-container"><div class="credits">November 24, 2017</div></div></div><div class="row"><div class="col-lg-3"><img src="https://i.imgur.com/sC2ozYo.png" style="width: 100%"/></div><div class="col-lg-9"><em><p><a href="http://thecodebarbarian.com/introducing-monogram-the-anti-odm-for-mongodb-nodejs">Monogram</a> has a powerful middleware system that makes <a href="https://en.wikipedia.org/wiki/Cross-cutting_concern">cross-cutting concerns</a> easy. One use case is <a href="https://www.mongodb.com/blog/post/6-rules-of-thumb-for-mongodb-schema-design-part-3">denormalization</a>, the practice of storing all or part of one document in another document. Denormalization is a powerful paradigm for both performance and data integrity. When done well, denormalization means you only need one query to fetch all necessary data, rather than using joins or <code>$lookup</code> stages that may require their own indexes.</p>
</em></div></div></div></div></div><div class="row"><div class="pull-right"><a href="/page/2">Older Articles >></a></div></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
  analytics.load("5DErrxzVhprg8sNh8xaiKDR6dNa7yGTI");
  analytics.page()
}}();</script></body></html>