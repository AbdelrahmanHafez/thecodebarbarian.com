<html><head><script type="text/javascript">var _sf_startpt=(new Date()).getTime()
</script><title>The Code Barbarian | www.thecodebarbarian.com</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600" rel="stylesheet" type="text/css"/><link href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,600,700" rel="stylesheet" type="text/css"/><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet"/><link href="/style/style.css" rel="stylesheet" type="text/css"/><link href="/style/github.css" rel="stylesheet" type="text/css"/><script href="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script><script href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" type="text/javascript"></script><script href="/javascript/sidebar.js" type="text/javascript"></script></head><body><div class="navbar social-links hidden-sm hidden-xs"><div class="container"><ul class="nav navbar-nav navbar-right"><li><a href="http://www.twitter.com/code_barbarian">twitter</a></li><li><a href="http://www.github.com/vkarpov15">github</a></li><li><a href="http://thecodebarbarian.com/feed.xml">rss</a></li></ul></div></div><div id="nav" class="navbar"><div class="container"><div class="navbar-header"><a href="/" class="navbar-brand big-brand"><img src="/images/Barbarian_Head.png" class="logo"/><span class="site-name">The Code Barbarian  </span></a></div><div id="home-nav-mobile" class="navbar-right collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="/tag/mongodb.html">MongoDB</a></li><li><a href="/tag/angularjs.html">AngularJS</a></li><li><a href="/tag/nodejs.html">NodeJS</a></li><li><a href="/tag/paleo.html">Paleo</a></li><li class="hidden-md hidden-lg"><a href="#">@code_barbarian</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Github</a></li><li class="hidden-md hidden-lg"><a href="#">TCB Facebook</a></li></ul></div></div></div><div class="container-fluid"></div><div id="mobile-sharing-options" class="container-fluid hidden-sm hidden-md hidden-lg"><div class="row"><div class="col-lg-12"></div></div></div><div class="container"><div class="col-lg-12 hero-row"><a href="/mongoose-4.12-single-embedded-discriminators.html"><div class="col-lg-8"><div class="row"><div style="background-image:url('https://i.imgur.com/1mS7e2f.jpg');" class="col-lg-12 hero-image"></div><div class="row"><div class="col-lg-12"><h1 class="hero-title">What's New in Mongoose 4.12: Single Embedded Discriminators</h1></div><div class="title-byline-container"><div class="hero-credits">October 12, 2017</div></div></div></div></div><div class="col-lg-4 home-popular"><p id="home-popular-label" class="right-bar-label">All Time Most Popular <ul class="list-unstyled"><li class="right-bar-li"><a href="http://thecodebarbarian.com/2015/01/24/angularjs-interceptors.html">An 80/20 Guide to AngularJS HTTP Interceptors</a></li><li class="right-bar-li"><a href="http://thecodebarbarian.com/2015/01/17/angularjs-loopback.html">Creating REST APIs and Clients with LoopBack and AngularJS</a></li><li class="right-bar-li"><a href="http://thecodebarbarian.com/cursors-in-mongoose-45">Cursors in Mongoose 4.5</a></li><li class="right-bar-li"><a href="http://thecodebarbarian.com/2015/03/20/callback-hell-is-a-myth">Callback Hell is a Myth</a></li><li class="right-bar-li"><a href="http://thecodebarbarian.com/2015/06/12/testing-angularjs-directives">Testing AngularJS Directives</a></li></ul></p></div></a></div><div class="col-lg-12"><div class="row"><p class="home-grid-label">Most Recent</p></div><div class="col-lg-4 home-post-grid-member"><a href="/casting-and-validating-geojson-with-archetype.html"><div style="background-image:url('https://i.imgur.com/uboKEWQ.jpg');" class="home-post-image"></div><h3 class="home-post-title">Casting and Validating GeoJSON With Archetype</h3><div class="home-date">October 04, 2017</div><div class="home-preview"><em><p><a href="https://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> is a powerful standard for</p>
</em></div></a></div><div class="col-lg-4 home-post-grid-member"><a href="/managing-connections-with-the-mongodb-node-driver.html"><div style="background-image:url('https://i.imgur.com/urAxn05.png');" class="home-post-image"></div><h3 class="home-post-title">Managing Connections with the MongoDB Node.js Driver</h3><div class="home-date">September 27, 2017</div><div class="home-preview"><em><p>Too often, MongoDB REST API developers don&#39;t think about handling database outages until they have an outage in production. Usually you can get away with this because version 2.x of the MongoDB Node.js driver does most of the work for you: it handles attempting to reconnect and can buffer operations for you so you don&#39;t get errors during a temporary outage. However, the MongoDB Node.js driver has a lot of tunable options and corresponding subtleties that you need to be aware of. In this article, I&#39;ll cover the basics of what happens when your backend MongoDB topology goes down for single server and replica sets, so you can configure the driver to do the right thing for your use case.</p>
</em></div></a></div><div class="col-lg-4 home-post-grid-member"><a href="/queueing-function-calls-with-node.js-and-mongodb.html"><div style="background-image:url('http://i.imgur.com/8ZVJyfD.jpg');" class="home-post-image"></div><h3 class="home-post-title">Queueing Function Calls with Node.js and MongoDB</h3><div class="home-date">September 08, 2017</div><div class="home-preview"><em><p>You might remember <a href="https://en.wikipedia.org/wiki/Lock_%28computer_science%29">locking</a> from your undergrad systems programming class. Locks are what you use when multiple threads want to access the same chunk of memory, and you don&#39;t want one thread to clobber the other&#39;s data. You don&#39;t have threads in Node.js, but that doesn&#39;t mean you can ignore concurrency, because your <a href="http://expressjs.com/">Express server</a> might get conflicting requests at roughly the same time. In this article, I&#39;ll describe how you can leverage promises and async functions to enforce the constraint that only one instance of a given function runs at a time.</p>
</em></div></a></div><div class="col-lg-4 home-post-grid-member"><a href="/thoughts-on-user-passwords-in-rest-apis.html"><div style="background-image:url('http://i.imgur.com/xbgdmGo.png');" class="home-post-image"></div><h3 class="home-post-title">Thoughts on User Passwords in REST APIs</h3><div class="home-date">August 11, 2017</div><div class="home-preview"><em><p>I often get questions about <a href="https://stackoverflow.com/questions/12096262/how-to-protect-the-password-field-in-mongoose-mongodb-so-it-wont-return-in-a-qu">how to secure user passwords in mongoose</a>. The answer is a one-liner, but I now think there&#39;s a better answer: why do you store the user&#39;s password in the user document anyway? This may seem blasphemous given that MongoDB&#39;s <a href="https://www.mongodb.com/presentations/mongodb-single-customer-view">&quot;single view of the customer&quot;</a> use case and that denormalization is one of MongoDB&#39;s killer features. However, I&#39;ve used this paradigm successfully for several projects. In this article, I&#39;ll make the case that a separate <code>AuthenticationMethod</code> collection is the way to go for storing password hashes in your database.</p>
</em></div></a></div><div class="col-lg-4 home-post-grid-member"><a href="/80-20-guide-to-express-error-handling.html"><div style="background-image:url('http://i.imgur.com/xmiL2zE.jpg');" class="home-post-image"></div><h3 class="home-post-title">The 80/20 Guide to Express Error Handling</h3><div class="home-date">August 04, 2017</div><div class="home-preview"><em><p><a href="http://expressjs.com/en/guide/error-handling.html">Express&#39; error handling middleware</a> is a powerful tool for consolidating your HTTP error response logic. Odds are, if you&#39;ve written Express code you&#39;ve written code that looks like what you see below.</p>
</em></div></a></div><div class="col-lg-4 home-post-grid-member"><a href="/importance-of-apis-in-a-full-stack-world.html"><div style="background-image:url('http://i.imgur.com/y6qzPpc.png');" class="home-post-image"></div><h3 class="home-post-title">The Importance of APIs in a Full Stack World</h3><div class="home-date">July 28, 2017</div><div class="home-preview"><em><p><em>This article originally appeared on <a href="https://www.lunchbadger.com/go-full-stack-with-express-and-apis/">LunchBadger</a>. LunchBadger <a href="https://www.lunchbadger.com/development/">helps you build APIs in a continuous lifecycle using serverless open source</a>.</em></p>
</em></div></a></div><div class="row"><div class="pull-right"><a href="/page/1">Older Articles >></a></div></div></div></div><div style="padding-bottom: 100px">&nbsp;</div><script type="text/javascript">!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.0.1";
  analytics.load("5DErrxzVhprg8sNh8xaiKDR6dNa7yGTI");
  analytics.page()
}}();</script></body></html>